import{_ as s,c as i,a2 as e,o as t}from"./chunks/framework.DPuwY6B9.js";const d=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"resource/duktape/guide/compatibility.md","filePath":"resource/duktape/guide/compatibility.md","lastUpdated":1732350347000}'),p={name:"resource/duktape/guide/compatibility.md"};function r(n,a,l,h,c,k){return t(),i("div",null,a[0]||(a[0]=[e(`<h2 id="compatibility" tabindex="-1">互換性 <a class="header-anchor" href="#compatibility" aria-label="Permalink to &quot;互換性 {#compatibility}&quot;">​</a></h2><p>このセクションでは、ECMAScriptの方言、拡張、フレームワーク、およびテスト・スイートとDuktapeの互換性について説明します。</p><h3 id="ecmascript-e5-e5-1" tabindex="-1">ECMAScript E5 / E5.1 <a class="header-anchor" href="#ecmascript-e5-e5-1" aria-label="Permalink to &quot;ECMAScript E5 / E5.1&quot;">​</a></h3><p>Duktapeの主な互換性目標は、ECMAScript E5/E5.1互換であることです。しかし、ES5の機能セマンティクスは、より新しい仕様バージョンで互換性のない変更が行われた場合、ES2015（またはそれ以降）に更新されます。現在の互換性レベルはかなり高いはずです。</p><h3 id="ecmascript-2015-e6" tabindex="-1">ECMAScript 2015 (E6) <a class="header-anchor" href="#ecmascript-2015-e6" aria-label="Permalink to &quot;ECMAScript 2015 (E6)&quot;">​</a></h3><p>DuktapeはECMAScript 2015（E6）の機能を一部実装していますが、一般的にE6との互換性はまだありません。</p><h3 id="ecmascript-2016-e7" tabindex="-1">ECMAScript 2016（E7） <a class="header-anchor" href="#ecmascript-2016-e7" aria-label="Permalink to &quot;ECMAScript 2016（E7）&quot;">​</a></h3><p>DuktapeはECMAScript 2016（E7）からいくつかの機能を実装していますが、一般的にE7との互換性はまだありません。</p><h3 id="ecmascript-e3" tabindex="-1">ECMAScript E3 <a class="header-anchor" href="#ecmascript-e3" aria-label="Permalink to &quot;ECMAScript E3&quot;">​</a></h3><p>E5/E5.1仕様で要求される以外に、ECMAScript E3との互換性を維持するための努力はしていません。</p><h3 id="coffeescript" tabindex="-1">CoffeeScript <a class="header-anchor" href="#coffeescript" aria-label="Permalink to &quot;CoffeeScript&quot;">​</a></h3><p>CoffeeScriptは、Duktapeと互換性があるはずのJavaScriptにコンパイルされます。既知の互換性の問題はありません。</p><p>いくつかのCoffeeScriptのサンプルが配布物に含まれています。単に examples/coffee/ で make を実行するだけです。例えば、hello.coffee:</p><div class="language-coffee vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">coffee</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">print</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;Hello world!&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">print</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;version: &#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Duktape.version</span></span></code></pre></div><p>コンパイルすると</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Hello world!&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;version: &#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Duktape.version);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><h3 id="coco" tabindex="-1">Coco <a class="header-anchor" href="#coco" aria-label="Permalink to &quot;Coco&quot;">​</a></h3><p>CoffeeScriptと同じく、CocoはJavascriptにコンパイルします。既知の問題はありません。</p><h3 id="livescript" tabindex="-1">LiveScript <a class="header-anchor" href="#livescript" aria-label="Permalink to &quot;LiveScript&quot;">​</a></h3><p>CoffeeScript と同様に、LiveScript は Javascript にコンパイルされます。既知の問題はありません。</p><h3 id="typescript" tabindex="-1">TypeScript <a class="header-anchor" href="#typescript" aria-label="Permalink to &quot;TypeScript&quot;">​</a></h3><p>TypeScript は Javascript にコンパイルされます。Microsoft TypeScript コンパイラ（ES5/CommonJS モード）を使って TypeScript をコンパイルし、Duktape を使って結果の Javascript を実行しても、既知の問題はありません。また、DuktapeでTypeScriptコンパイラーを実行することも可能です。</p><h3 id="underscore-js" tabindex="-1">Underscore.js <a class="header-anchor" href="#underscore-js" aria-label="Permalink to &quot;Underscore.js&quot;">​</a></h3><p>Underscore.jsは、プレーンなECMAScriptに多くの便利なユーティリティを提供します。Duktapeは、Underscoreのほぼ全てのテストケースをパスします。現在の互換性ステータスについてはunderscore-status.rstを参照してください。</p><h3 id="test262" tabindex="-1">Test262 <a class="header-anchor" href="#test262" aria-label="Permalink to &quot;Test262&quot;">​</a></h3><p>test262はE5.1互換性をテストするためのテスト・スイートですが、標準のE5.1以外のテストも含まれています。Duktape は test262 のほぼ全てのケースに合格しています。現在の互換性ステータスは test262-status.rst を参照してください。</p><h3 id="asm-js" tabindex="-1">Asm.js <a class="header-anchor" href="#asm-js" aria-label="Permalink to &quot;Asm.js&quot;">​</a></h3><p>asm.js は「コンパイラのための低レベルで効率的なターゲット言語として使用できる、JavaScript の厳密なサブセット」です。JavaScriptのサブセットとして、asm.jsの型注釈を使った関数は、Duktapeと完全に互換性があるはずです。しかし、Duktapeはasm.jsを特にサポートしておらず、asm.jsのコードを最適化することはありません。実際、asm.jsのコードは不要なバイトコードを生成し、通常のECMAScriptのコードよりも実行速度が遅くなります。asm.jsによって指定された &quot;use asm &quot;指示は、Duktapeでは無視されます。</p><h3 id="emscripten" tabindex="-1">Emscripten <a class="header-anchor" href="#emscripten" aria-label="Permalink to &quot;Emscripten&quot;">​</a></h3><p>Emscriptenは、C/C++をJavascriptにコンパイルします。Duktapeは現在（Duktape 1.5.0時点）Emscriptenと互換性があり、Emscriptenのfastcompが使用できるES2015 TypedArrayをサポートしています。</p><p>Duktapeコンパイラが仮想レジスタを使い果たすため、大規模なプログラムは失敗する可能性があります。また、Duktapeはインタプリタ型エンジンであるため、性能はやや制限されます。現在の互換性の状況は emscripten-status.rst を見てください。</p><p>Duktape自体はEmscriptenでコンパイルされているので、例えばWebページの中でDuktapeを実行することも可能です（Dukweb REPLを参照）。</p><h3 id="lua-js" tabindex="-1">Lua.js <a class="header-anchor" href="#lua-js" aria-label="Permalink to &quot;Lua.js&quot;">​</a></h3><p>lua.jsは、LuaのコードをJavascriptに変換します。生成されたJavascriptを実行する上で既知の問題はありませんが、Duktapeがlua.jsが期待するconsole.logを提供しないことが挙げられます。これは簡単に改善できます。例えば、以下のように前置きをします。</p><div class="language-lua vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">print</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Array.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">call</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(arguments, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39; &#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)); } };</span></span></code></pre></div><h3 id="js-interpreter" tabindex="-1">JS-Interpreter <a class="header-anchor" href="#js-interpreter" aria-label="Permalink to &quot;JS-Interpreter&quot;">​</a></h3><p>JS-Interpreterは、JavascriptをJavascriptの中で解釈します。JS-InterpreterはDuktapeと一緒に動作しますが、DuktapeはJS-Interpreterが期待するウィンドウを提供しません。これは、プリペンドすることで修正可能です。</p><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">window </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {};</span></span></code></pre></div>`,38)]))}const E=s(p,[["render",r]]);export{d as __pageData,E as default};
