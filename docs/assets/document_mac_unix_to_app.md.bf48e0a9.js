import{_ as s,o as a,c as n,Q as l}from"./chunks/framework.32d25f99.js";const g=JSON.parse('{"title":"Mac で実行ファイルを含むディレクトリをアプリ化する","description":"","frontmatter":{},"headers":[],"relativePath":"document/mac_unix_to_app.md","filePath":"document/mac_unix_to_app.md","lastUpdated":1697360545000}'),p={name:"document/mac_unix_to_app.md"},o=l(`<h1 id="mac-で実行ファイルを含むディレクトリをアプリ化する" tabindex="-1">Mac で実行ファイルを含むディレクトリをアプリ化する <a class="header-anchor" href="#mac-で実行ファイルを含むディレクトリをアプリ化する" aria-label="Permalink to &quot;Mac で実行ファイルを含むディレクトリをアプリ化する&quot;">​</a></h1><p>ここではシェルスクリプト経由で実行する方法について解説します。</p><h2 id="ディレクトリ構造" tabindex="-1">ディレクトリ構造 <a class="header-anchor" href="#ディレクトリ構造" aria-label="Permalink to &quot;ディレクトリ構造&quot;">​</a></h2><p>次のようなディレクトリ構造にしてファイルを配置します。</p><ul><li>📁 raia.app <ul><li>📁 Contents <ul><li>📄 Info.plist（設定ファイル）</li><li>📁 MacOS <ul><li>📄 run.sh（シェルスクリプト）</li><li>📄 raia_startup（実行ファイル）</li><li>📄 *.dylib（共有ライブラリ）</li><li>...</li></ul></li><li>📁 Resources <ul><li>📄 main.js（ゲームスクリプト）</li><li>📄 app.icns（アイコン）</li><li>...</li></ul></li></ul></li></ul></li></ul><h2 id="info-plist-を編集する" tabindex="-1">Info.plist を編集する <a class="header-anchor" href="#info-plist-を編集する" aria-label="Permalink to &quot;Info.plist を編集する&quot;">​</a></h2><p><code>*.app/Contents/Info.plist</code> の内容を次のように書き換えます。</p><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;?</span><span style="color:#85E89D;">xml</span><span style="color:#B392F0;"> version</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;1.0&quot;</span><span style="color:#B392F0;"> encoding</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;UTF-8&quot;</span><span style="color:#E1E4E8;">?&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;!</span><span style="color:#F97583;">DOCTYPE</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">plist</span><span style="color:#E1E4E8;"> PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">plist</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">version</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;1.0&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">dict</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">key</span><span style="color:#E1E4E8;">&gt;CFBundleExecutable&lt;/</span><span style="color:#85E89D;">key</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">string</span><span style="color:#E1E4E8;">&gt;run.sh&lt;/</span><span style="color:#85E89D;">string</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">key</span><span style="color:#E1E4E8;">&gt;CFBundlePackageType&lt;/</span><span style="color:#85E89D;">key</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">string</span><span style="color:#E1E4E8;">&gt;APPL&lt;/</span><span style="color:#85E89D;">string</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">key</span><span style="color:#E1E4E8;">&gt;CFBundleSignature&lt;/</span><span style="color:#85E89D;">key</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">string</span><span style="color:#E1E4E8;">&gt;run&lt;/</span><span style="color:#85E89D;">string</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">key</span><span style="color:#E1E4E8;">&gt;CFBundleIconFile&lt;/</span><span style="color:#85E89D;">key</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">string</span><span style="color:#E1E4E8;">&gt;app.icns&lt;/</span><span style="color:#85E89D;">string</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">dict</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">plist</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;?</span><span style="color:#22863A;">xml</span><span style="color:#6F42C1;"> version</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;1.0&quot;</span><span style="color:#6F42C1;"> encoding</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;UTF-8&quot;</span><span style="color:#24292E;">?&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;!</span><span style="color:#D73A49;">DOCTYPE</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">plist</span><span style="color:#24292E;"> PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">plist</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">version</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;1.0&quot;</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">dict</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">key</span><span style="color:#24292E;">&gt;CFBundleExecutable&lt;/</span><span style="color:#22863A;">key</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">string</span><span style="color:#24292E;">&gt;run.sh&lt;/</span><span style="color:#22863A;">string</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">key</span><span style="color:#24292E;">&gt;CFBundlePackageType&lt;/</span><span style="color:#22863A;">key</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">string</span><span style="color:#24292E;">&gt;APPL&lt;/</span><span style="color:#22863A;">string</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">key</span><span style="color:#24292E;">&gt;CFBundleSignature&lt;/</span><span style="color:#22863A;">key</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">string</span><span style="color:#24292E;">&gt;run&lt;/</span><span style="color:#22863A;">string</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">key</span><span style="color:#24292E;">&gt;CFBundleIconFile&lt;/</span><span style="color:#22863A;">key</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">string</span><span style="color:#24292E;">&gt;app.icns&lt;/</span><span style="color:#22863A;">string</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">dict</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">plist</span><span style="color:#24292E;">&gt;</span></span></code></pre></div><h2 id="run-sh" tabindex="-1">run.sh <a class="header-anchor" href="#run-sh" aria-label="Permalink to &quot;run.sh&quot;">​</a></h2><p><code>*.app/Contents/MacOS/run.sh</code> の内容を次のように書き換えます。</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">#!/bin/bash</span></span>
<span class="line"><span style="color:#E1E4E8;">CURRENT</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">$(</span><span style="color:#79B8FF;">cd</span><span style="color:#9ECBFF;"> $(</span><span style="color:#B392F0;">dirname</span><span style="color:#9ECBFF;"> </span><span style="color:#79B8FF;">$0</span><span style="color:#9ECBFF;">);</span><span style="color:#79B8FF;">pwd</span><span style="color:#9ECBFF;">)</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> $CURRENT</span></span>
<span class="line"><span style="color:#E1E4E8;">$CURRENT/raia_startup</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">#!/bin/bash</span></span>
<span class="line"><span style="color:#24292E;">CURRENT</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">$(</span><span style="color:#005CC5;">cd</span><span style="color:#032F62;"> $(</span><span style="color:#6F42C1;">dirname</span><span style="color:#032F62;"> </span><span style="color:#005CC5;">$0</span><span style="color:#032F62;">);</span><span style="color:#005CC5;">pwd</span><span style="color:#032F62;">)</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> $CURRENT</span></span>
<span class="line"><span style="color:#24292E;">$CURRENT/raia_startup</span></span></code></pre></div><h2 id="シェルスクリプトの実行権限" tabindex="-1">シェルスクリプトの実行権限 <a class="header-anchor" href="#シェルスクリプトの実行権限" aria-label="Permalink to &quot;シェルスクリプトの実行権限&quot;">​</a></h2><p><code>chmod</code> コマンドを使って <code>run.sh</code> に実行権限を付与します。</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">chmod</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">+x</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">run.sh</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">chmod</span><span style="color:#24292E;"> </span><span style="color:#032F62;">+x</span><span style="color:#24292E;"> </span><span style="color:#032F62;">run.sh</span></span></code></pre></div><h2 id="起動のテストをする" tabindex="-1">起動のテストをする <a class="header-anchor" href="#起動のテストをする" aria-label="Permalink to &quot;起動のテストをする&quot;">​</a></h2><p><code>*.app</code> ディレクトリをダブルクリックして起動するかチェックします。</p>`,16),t=[o];function e(c,r,E,y,i,d){return a(),n("div",null,t)}const h=s(p,[["render",e]]);export{g as __pageData,h as default};
